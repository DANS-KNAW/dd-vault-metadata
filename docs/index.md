dd-vault-metadata
=================

Dataverse workflow step for setting DANS Data Vault metadata.

Purpose
-------
This service implements a `PrePublishDataset` workflow step that sets DANS Data Vault metadata
on the dataset-version about to be published. 

Interfaces
----------
This service has the following interfaces:

![interfaces](img/overview.png){width="70%"}

### Provided interfaces

#### Step invocation API

* _Protocol type_: HTTP
* _Internal or external_: **internal**
* _Purpose_: invoked by Dataverse when the `PrePublishDataset` workflow is executed

#### Admin console

* _Protocol type_: HTTP
* _Internal or external_: **internal**
* _Purpose_: application monitoring and management

### Consumed interfaces

#### Dataverse edit metadata API

* _Protocol type_: HTTP
* _Internal or external_: **internal**
* _Purpose_: to set the DANS Data Vault metadata fields on the dataset-version

Processing
-----------
The following fields in the block `dansDataVaultMetadata` are set by this service:

| typeName                  | value source  V1.0                   | value source Vn, n > 1.0                 |
|---------------------------|--------------------------------------|------------------------------------------|
| `dansDataversePid`        | the dataset DOI                      | the dataset DOI                          |
| `dansDataversePidVersion` | the dataset version number           | the dataset version number               |
| `dansBagId`               | a urn:uuid generated by this service | a urn:uuid generated by this<br> service |
| `dansNbn`                 | a urn:nbn generated by this service  | the urn:nbn minted for V1.0              |

